(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{8483:function(e,t,a){Promise.resolve().then(a.bind(a,5040))},5040:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7437),r=a(2265),n=a(7370),o=a(8810),l=a(826),i=a(9883),c=a(1138),d=a(5817),u=a(9764),h=a(3714),g=a(6020),m=a(5925),p=a(7393),x=a(2601);function f(){let{user:e}=(0,o.useAuth)(),[t,a]=(0,r.useState)([]),[f,b]=(0,r.useState)(null),[v,y]=(0,r.useState)([]),[j,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[A,U]=(0,r.useState)(null),P=(0,r.useRef)(null),I=(0,r.useRef)(null),Z=(0,r.useRef)(null);(0,r.useEffect)(()=>{_()},[]),(0,r.useEffect)(()=>{f&&D()},[f]),(0,r.useEffect)(()=>{E()},[v,C]);let E=()=>{var e;null===(e=P.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},_=async()=>{try{let e=await l.xU.getAll();a(e.data.chats),e.data.chats.length>0&&!f&&b(e.data.chats[0])}catch(e){m.default.error("Failed to load chats")}},D=async()=>{if(f)try{let e=await l.xU.getOne(f.id),t=Array.isArray(e.data.chat.messages)?e.data.chat.messages:[];y(t)}catch(e){m.default.error("Failed to load chat")}},L=async()=>{try{let e=(await l.xU.create({title:"New Chat"})).data.chat;a([e,...t]),b(e),y([])}catch(a){var e,s,r;console.error("Chat creation error:",a);let t=(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||a.message||"Failed to create chat";(null===(r=a.response)||void 0===r?void 0:r.status)===402?m.default.error("Insufficient credits. You need ".concat(a.response.data.required," credits but have ").concat(a.response.data.available,".")):m.default.error(t)}},O=async()=>{if(!j.trim()||!f||N)return;let e={role:"user",content:j,...A&&{file:A.name}};y(t=>[...t,e]),w(""),U(null),k(!0),S(!0);try{var t;let e=localStorage.getItem("token"),a=null;if(A){let t=new FormData;t.append("file",A);let s=await fetch("".concat(x.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api","/documents/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t});s.ok&&(a=(await s.json()).document.fileUrl)}let s=await fetch("".concat(x.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api","/chat/").concat(f.id,"/message"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({message:j,fileUrl:a})});if(!s.ok)throw Error("Failed to send message");let r=null===(t=s.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder,o={role:"assistant",content:""};if(y(e=>[...e,o]),r)for(;;){let{done:e,value:t}=await r.read();if(e)break;for(let e of n.decode(t).split("\n"))if(e.startsWith("data: "))try{let t=JSON.parse(e.slice(6));if(t.error){m.default.error(t.error),y(e=>e.slice(0,-1)),S(!1);break}t.content&&(o.content+=t.content,y(e=>{let t=[...e];return t[t.length-1]={...o},t})),t.done&&S(!1)}catch(e){console.error("Parse error:",e)}}else{let e=await s.text();try{let t=JSON.parse(e);throw Error(t.error||"Failed to get response")}catch(e){throw Error("Failed to read response stream")}}}catch(t){console.error("Chat error:",t);let e=t.message||"Failed to send message";m.default.error(e),y(e=>{let t=[...e];return t.length>0&&"assistant"===t[t.length-1].role&&t.pop(),t.length>0&&"user"===t[t.length-1].role&&t.pop(),t})}finally{k(!1),S(!1),D()}},R=async e=>{try{await l.xU.delete(e),a(t.filter(t=>t.id!==e)),(null==f?void 0:f.id)===e&&(b(null),y([])),m.default.success("Chat deleted")}catch(e){m.default.error("Failed to delete chat")}};return(0,s.jsx)(n.Z,{children:(0,s.jsxs)("div",{className:"flex h-[calc(100vh-8rem)]",children:[(0,s.jsxs)("div",{className:"w-64 bg-white rounded-lg shadow mr-4 flex flex-col",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,s.jsxs)("button",{onClick:L,className:"w-full flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"New Chat"]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(e=>(0,s.jsxs)("div",{onClick:()=>b(e),className:"p-3 rounded-lg cursor-pointer mb-2 transition ".concat((null==f?void 0:f.id)===e.id?"bg-red-50 border border-red-200":"hover:bg-gray-50"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.title}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),R(e.id)},className:"text-red-500 hover:text-red-700",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.updatedAt).toLocaleDateString()})]},e.id))})]}),(0,s.jsx)("div",{className:"flex-1 bg-white rounded-lg shadow flex flex-col",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"font-semibold",children:f.title}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{if(!f)return;let e=v.map(e=>"".concat("user"===e.role?"You":"AI",": ").concat(e.content)).join("\n\n"),t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="".concat(f.title||"chat",".txt"),s.click(),URL.revokeObjectURL(a)},className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Download chat",children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Share chat",children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{ref:I,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[v.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-3xl rounded-lg p-4 ".concat("user"===e.role?"bg-red-500 text-white":"bg-gray-100 text-gray-900"),children:"assistant"===e.role?(0,s.jsx)(p.UG,{className:"prose prose-sm max-w-none",children:e.content}):(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.content})})},t)),C&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,s.jsx)("div",{ref:P})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[A&&(0,s.jsxs)("div",{className:"mb-2 flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:A.name}),(0,s.jsx)("button",{type:"button",onClick:()=>U(null),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),O()},className:"flex gap-2",children:[(0,s.jsx)("input",{ref:Z,type:"file",className:"hidden",accept:".pdf,.docx,.txt,image/*,video/*,audio/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&U(a)}}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.click()},className:"px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition",title:"Attach file",children:(0,s.jsx)(h.Z,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none",disabled:N}),(0,s.jsx)("button",{type:"submit",disabled:N||!j.trim(),className:"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(g.Z,{className:"w-5 h-5"})})]})]})]}):(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg mb-2",children:"No chat selected"}),(0,s.jsx)("p",{className:"text-sm",children:"Create a new chat to get started"})]})})})]})})}},7370:function(e,t,a){"use strict";a.d(t,{Z:function(){return j}});var s=a(7437),r=a(1396),n=a.n(r),o=a(4033),l=a(8810),i=a(5119),c=a(2882),d=a(6637),u=a(8339),h=a(6002),g=a(8956),m=a(1271),p=a(7461),x=a(1295),f=a(1738),b=a(5750),v=a(9409),y=a(5883);function j(e){var t,a;let{children:r}=e,j=(0,o.usePathname)(),w=(0,o.useRouter)(),{user:N,logout:k}=(0,l.useAuth)(),C=[{name:"Dashboard",href:"/dashboard",icon:i.Z},{name:"AI Chat",href:"/chat",icon:c.Z},{name:"Documents",href:"/documents",icon:d.Z},{name:"Media",href:"/media",icon:u.Z},{name:"Presentations",href:"/presentations",icon:h.Z},{name:"Websites",href:"/websites",icon:g.Z},{name:"Mobile Apps",href:"/mobile-apps",icon:m.Z},{name:"LinkedIn",href:"/linkedin",icon:p.Z},{name:"Social Media",href:"/social-media",icon:g.Z},{name:"Email",href:"/email",icon:x.Z}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)("aside",{className:"fixed left-0 top-0 h-full w-64 bg-white border-r border-gray-200 flex flex-col overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:(0,s.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-red-500 to-pink-500 bg-clip-text text-transparent",children:"AI SaaS Platform"})}),(0,s.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:C.map(e=>{let t=e.icon,a=j===e.href||(null==j?void 0:j.startsWith(e.href+"/"));return(0,s.jsxs)(n(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition ".concat(a?"bg-red-50 text-red-500 font-semibold":"text-gray-700 hover:bg-gray-50"),children:[(0,s.jsx)(t,{className:"w-5 h-5"}),e.name]},e.name)})}),(0,s.jsxs)("div",{className:"p-4 border-t border-gray-200 space-y-2 flex-shrink-0",children:[(0,s.jsxs)(n(),{href:"/pricing",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5"}),"Pricing"]}),(null==N?void 0:N.role)==="ADMIN"&&(0,s.jsxs)(n(),{href:"/admin",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5"}),"Admin"]}),(0,s.jsxs)(n(),{href:"/settings",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50 transition",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5"}),"Settings"]}),(0,s.jsxs)("button",{onClick:()=>{k(),w.push("/login")},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5"}),"Logout"]})]})]}),(0,s.jsxs)("div",{className:"ml-64",children:[(0,s.jsxs)("header",{className:"bg-white border-b border-gray-200 px-8 py-4 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:(null===(t=C.find(e=>j===e.href||(null==j?void 0:j.startsWith(e.href+"/"))))||void 0===t?void 0:t.name)||"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:(null==N?void 0:N.name)||(null==N?void 0:N.email)}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[null==N?void 0:N.subscriptionPlan," Plan â€¢ ",null==N?void 0:N.credits," credits"]})]}),(null==N?void 0:N.avatar)?(0,s.jsx)("img",{src:N.avatar,alt:"Avatar",className:"w-10 h-10 rounded-full"}):(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white font-semibold",children:(null==N?void 0:null===(a=N.name)||void 0===a?void 0:a[0])||(null==N?void 0:N.email[0].toUpperCase())})]})]}),(0,s.jsx)("main",{className:"p-8",children:r})]})]})}},826:function(e,t,a){"use strict";a.d(t,{BG:function(){return g},JY:function(){return u},Nq:function(){return b},XF:function(){return m},Yv:function(){return c},_v:function(){return f},cF:function(){return d},d9:function(){return x},h7:function(){return h},iJ:function(){return o},rp:function(){return p},tG:function(){return i},xU:function(){return l}});var s=a(4829);let r=a(2601).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",n=s.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let o={register:e=>n.post("/auth/register",e),login:e=>n.post("/auth/login",e),getMe:()=>n.get("/auth/me")},l={getAll:()=>n.get("/chat"),getOne:e=>n.get("/chat/".concat(e)),create:e=>n.post("/chat",e),sendMessage:(e,t,a,s)=>n.post("/chat/".concat(e,"/message"),{message:t,fileData:a,fileUrl:s}),updateTitle:(e,t)=>n.patch("/chat/".concat(e,"/title"),{title:t}),share:e=>n.post("/chat/".concat(e,"/share")),delete:e=>n.delete("/chat/".concat(e))},i={getAll:()=>n.get("/documents"),getOne:e=>n.get("/documents/".concat(e)),upload:e=>{let t=new FormData;return t.append("file",e),n.post("/documents/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},chat:(e,t)=>n.post("/documents/".concat(e,"/chat"),{message:t}),export:(e,t)=>n.post("/documents/".concat(e,"/export"),{format:t}),delete:e=>n.delete("/documents/".concat(e))},c={getAll:()=>n.get("/presentations"),getOne:e=>n.get("/presentations/".concat(e)),create:e=>n.post("/presentations",e),update:(e,t)=>n.patch("/presentations/".concat(e),t),export:(e,t)=>n.post("/presentations/".concat(e,"/export"),{format:t}),delete:e=>n.delete("/presentations/".concat(e))},d={getAll:()=>n.get("/websites"),getOne:e=>n.get("/websites/".concat(e)),generate:e=>n.post("/websites/generate",e),generateCode:e=>n.post("/websites/generate-code",e),preview:e=>n.get("/websites/preview/".concat(e)),export:e=>n.get("/websites/export/".concat(e)),update:(e,t)=>n.patch("/websites/".concat(e),t),download:e=>n.get("/websites/".concat(e,"/download")),delete:e=>n.delete("/websites/".concat(e))},u={getAll:()=>n.get("/mobile-apps"),getOne:e=>n.get("/mobile-apps/".concat(e)),generate:e=>n.post("/mobile-apps/generate",e),update:(e,t)=>n.patch("/mobile-apps/".concat(e),t),download:e=>n.get("/mobile-apps/".concat(e,"/download")),share:e=>n.post("/mobile-apps/".concat(e,"/share")),delete:e=>n.delete("/mobile-apps/".concat(e))},h={getCurrent:()=>n.get("/subscriptions"),checkout:e=>n.post("/subscriptions/checkout",{plan:e}),getInvoices:()=>n.get("/subscriptions/invoices")},g={getProfile:()=>n.get("/user/profile"),updateProfile:e=>n.patch("/user/profile",e),getUsage:e=>n.get("/user/usage",{params:e}),getDashboard:()=>n.get("/user/dashboard")},m={upload:e=>{let t=new FormData;return t.append("file",e),n.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},chat:(e,t)=>n.post("/media/".concat(e,"/chat"),{message:t})},p={login:()=>n.post("/linkedin/login"),oauthCallback:e=>n.get("/linkedin/oauth/callback?code=".concat(e)),generatePost:e=>n.post("/linkedin/generate-post",e),schedule:e=>n.post("/linkedin/schedule",e),autoMessage:e=>n.post("/linkedin/auto-message",e),autoComment:e=>n.post("/linkedin/auto-comment",e)},x={generate:e=>n.post("/social-media/generate",e),schedule:e=>n.post("/social-media/schedule",e),getScheduled:()=>n.get("/social-media/scheduled")},f={connect:e=>n.post("/email/connect",e),generateReply:e=>n.post("/email/generate-reply",e),getSuggestions:e=>n.post("/email/suggestions",e),getInbox:()=>n.get("/email/inbox")},b={getUsers:e=>n.get("/admin/users",{params:e}),getUser:e=>n.get("/admin/users/".concat(e)),updateUser:(e,t)=>n.patch("/admin/users/".concat(e),t),deleteUser:e=>n.delete("/admin/users/".concat(e)),getAnalytics:e=>n.get("/admin/analytics",{params:e}),getUsageLogs:e=>n.get("/admin/usage-logs",{params:e})}},8810:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return l},useAuth:function(){return i}});var s=a(7437),r=a(2265),n=a(826);let o=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e?(c(e),h()):u(!1)},[]);let h=async()=>{try{let e=await n.iJ.getMe();l(e.data.user)}catch(e){localStorage.removeItem("token"),c(null)}finally{u(!1)}},g=async(e,t)=>{let{user:a,token:s}=(await n.iJ.login({email:e,password:t})).data;localStorage.setItem("token",s),c(s),l(a)},m=async(e,t,a)=>{let{user:s,token:r}=(await n.iJ.register({email:e,password:t,name:a})).data;localStorage.setItem("token",r),c(r),l(s)};return(0,s.jsx)(o.Provider,{value:{user:a,token:i,login:g,register:m,logout:()=>{localStorage.removeItem("token"),c(null),l(null)},loading:d},children:t})}function i(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[737,250,789,292,971,458,744],function(){return e(e.s=8483)}),_N_E=e.O()}]);